(function(c,f){c(function(){function c(a){function g(b){function l(b){j&&e(h(b))}function a(b){j&&(d||r(m,b),e(q(b)))}function e(b){var a=j;j=u;c=b;n(function(){a.forEach(function(b){b(c)})})}var m,c,d,j=[];m=new p(function(b,a){d||(d=!0,k(m));return g(function(l,e){j?j.push(function(c){c.then(b,a).then(l,e)}):n(function(){c.then(b,a).then(l,e)})})});try{b(l,a)}catch(f){a(f)}return m}function p(b){this.then=b;s(this)}function h(b){return b instanceof p?b:b!==Object(b)?f(b):g(function(a,c){n(function(){try{var e=
b.then;"function"===typeof e?t(e,b,a,c):a(f(b))}catch(d){c(d)}})})}function f(b){var a=new p(function(c){try{return"function"==typeof c?h(c(b)):a}catch(e){return q(e)}});return a}function q(b){var a=new p(function(c,e){try{return"function"==typeof e?h(e(b)):a}catch(d){return q(d)}});return a}var n,k,r,s;n=a.enqueue||d.enqueue;k=a.handled||d.handled;r=a.unhandled||d.unhandled;s=a.protect||d.protect;g.lift=function(b){return g(function(a){a(b)})};g.reject=function(b){return g(function(a,c){c(b)})};
return g}function h(){}var a,d,k,t,u;a=Function.prototype.bind;t=a.bind(a.call)(a.call);k=f.setTimeout;d={enqueue:"function"===typeof setImmediate?setImmediate.bind(f):"object"===typeof process&&process.nextTick?process.nextTick:"object"===typeof vertx?vertx.runOnLoop:function(a){k(a,0)},unhandled:h,handled:h,protect:h};a=c(d);a.construct=c;return a})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()},this);
